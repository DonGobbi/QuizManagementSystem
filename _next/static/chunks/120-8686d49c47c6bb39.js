"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[120],{7120:function(e,s,t){t.d(s,{Z:function(){return c}});var r=t(7437),a=t(2265),n=t(7648),i=t(1245),d=t(9376);function l(){let{user:e,logout:s}=(0,i.a)(),t=(0,d.usePathname)(),[l,o]=(0,a.useState)(!1),c=async()=>{try{await s()}catch(e){console.error("Error logging out:",e)}},m=e=>t===e?"bg-primary-700 text-white":"text-primary-100 hover:bg-primary-700 hover:text-white";return(0,r.jsxs)("nav",{className:"bg-primary-800",children:[(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(n.default,{href:"/",className:"text-white font-bold text-xl",children:"Quiz Management"})}),(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsxs)("div",{className:"ml-10 flex items-baseline space-x-4",children:[(0,r.jsx)(n.default,{href:"/dashboard",className:"px-3 py-2 rounded-md text-sm font-medium ".concat(m("/dashboard")),children:"Dashboard"}),(null==e?void 0:e.role)==="admin"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.default,{href:"/admin/quizzes",className:"px-3 py-2 rounded-md text-sm font-medium ".concat(m("/admin/quizzes")),children:"Manage Quizzes"}),(0,r.jsx)(n.default,{href:"/admin/results",className:"px-3 py-2 rounded-md text-sm font-medium ".concat(m("/admin/results")),children:"View Results"})]}),(null==e?void 0:e.role)==="student"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.default,{href:"/student/quizzes",className:"px-3 py-2 rounded-md text-sm font-medium ".concat(m("/student/quizzes")),children:"Available Quizzes"}),(0,r.jsx)(n.default,{href:"/student/results",className:"px-3 py-2 rounded-md text-sm font-medium ".concat(m("/student/results")),children:"My Results"})]})]})})]}),(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsx)("div",{className:"ml-4 flex items-center md:ml-6",children:e?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("span",{className:"text-white mr-4",children:["Hello, ",e.displayName||e.email]}),(0,r.jsx)("button",{onClick:c,className:"px-3 py-2 rounded-md text-sm font-medium text-white bg-primary-700 hover:bg-primary-600",children:"Logout"})]}):(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)(n.default,{href:"/login",className:"px-3 py-2 rounded-md text-sm font-medium text-white bg-primary-700 hover:bg-primary-600",children:"Login"}),(0,r.jsx)(n.default,{href:"/signup",className:"px-3 py-2 rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-500",children:"Sign Up"})]})})}),(0,r.jsx)("div",{className:"-mr-2 flex md:hidden",children:(0,r.jsxs)("button",{onClick:()=>o(!l),className:"bg-primary-700 inline-flex items-center justify-center p-2 rounded-md text-primary-200 hover:text-white hover:bg-primary-600 focus:outline-none",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open main menu"}),l?(0,r.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):(0,r.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),l&&(0,r.jsxs)("div",{className:"md:hidden",children:[(0,r.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[(0,r.jsx)(n.default,{href:"/dashboard",className:"block px-3 py-2 rounded-md text-base font-medium ".concat(m("/dashboard")),children:"Dashboard"}),(null==e?void 0:e.role)==="admin"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.default,{href:"/admin/quizzes",className:"block px-3 py-2 rounded-md text-base font-medium ".concat(m("/admin/quizzes")),children:"Manage Quizzes"}),(0,r.jsx)(n.default,{href:"/admin/results",className:"block px-3 py-2 rounded-md text-base font-medium ".concat(m("/admin/results")),children:"View Results"})]}),(null==e?void 0:e.role)==="student"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.default,{href:"/student/quizzes",className:"block px-3 py-2 rounded-md text-base font-medium ".concat(m("/student/quizzes")),children:"Available Quizzes"}),(0,r.jsx)(n.default,{href:"/student/results",className:"block px-3 py-2 rounded-md text-base font-medium ".concat(m("/student/results")),children:"My Results"})]})]}),(0,r.jsx)("div",{className:"pt-4 pb-3 border-t border-primary-700",children:e?(0,r.jsxs)("div",{className:"px-2 space-y-1",children:[(0,r.jsx)("div",{className:"block px-3 py-2 text-base font-medium text-white",children:e.displayName||e.email}),(0,r.jsx)("button",{onClick:c,className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-primary-100 hover:text-white hover:bg-primary-700",children:"Logout"})]}):(0,r.jsxs)("div",{className:"px-2 space-y-1",children:[(0,r.jsx)(n.default,{href:"/login",className:"block px-3 py-2 rounded-md text-base font-medium text-primary-100 hover:text-white hover:bg-primary-700",children:"Login"}),(0,r.jsx)(n.default,{href:"/signup",className:"block px-3 py-2 rounded-md text-base font-medium text-primary-100 hover:text-white hover:bg-primary-700",children:"Sign Up"})]})})]})]})}var o=t(2496);function c(e){let{children:s,requireAdmin:t=!1}=e,{user:a,loading:n}=(0,i.a)(),c=(0,d.useRouter)();return n?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(o.Z,{})}):a?t&&"admin"!==a.role?(c.push("/dashboard"),null):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(l,{}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:s})]}):(c.push("/login"),null)}},2496:function(e,s,t){t.d(s,{Z:function(){return a}});var r=t(7437);function a(){return(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary-600"})})}t(2265)},1245:function(e,s,t){t.d(s,{AuthProvider:function(){return c},a:function(){return o}});var r=t(7437),a=t(2265),n=t(3301),i=t(6410),d=t(5978);let l=(0,a.createContext)(void 0);function o(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function c(e){let{children:s}=e,[t,o]=(0,a.useState)(null),[c,m]=(0,a.useState)(!0);async function u(e,s,t,r){try{let a=(await (0,n.Xb)(i.I8,e,s)).user;await (0,n.ck)(a,{displayName:t}),await (0,d.pl)((0,d.JU)(i.db,"users",a.uid),{uid:a.uid,email:a.email,displayName:t,role:r,createdAt:new Date().toISOString()})}catch(e){throw console.error("Error during signup:",e),e}}async function x(e,s){try{await (0,n.e5)(i.I8,e,s)}catch(e){throw console.error("Error during login:",e),e}}async function h(){try{await (0,n.w7)(i.I8)}catch(e){throw console.error("Error during logout:",e),e}}return(0,a.useEffect)(()=>{let e=(0,n.Aj)(i.I8,async e=>{if(e)try{let s=await (0,d.QT)((0,d.JU)(i.db,"users",e.uid));if(s.exists()){let t=s.data();o({uid:e.uid,email:e.email,displayName:e.displayName,role:t.role})}else console.warn("User document not found in Firestore"),o({uid:e.uid,email:e.email,displayName:e.displayName,role:"student"})}catch(e){console.error("Error fetching user data:",e),o(null)}else o(null);m(!1)});return()=>e()},[]),(0,r.jsx)(l.Provider,{value:{user:t,loading:c,signup:u,login:x,logout:h},children:s})}},6410:function(e,s,t){let r;t.d(s,{I8:function(){return d},db:function(){return l}});var a=t(738),n=t(3301),i=t(5978);t(9761),r=(0,a.C6)().length?(0,a.C6)()[0]:(0,a.ZF)({apiKey:"AIzaSyApET8-Esu22RoYeldw6USghH9NV3vSQyY",authDomain:"quizmanagement-8207e.firebaseapp.com",projectId:"quizmanagement-8207e",storageBucket:"quizmanagement-8207e.firebasestorage.app",messagingSenderId:"137678753393",appId:"1:137678753393:web:32a414898af4ac719595d0",measurementId:"G-BZCXD15L2K"});let d=(0,n.v0)(r),l=(0,i.ad)(r)}}]);