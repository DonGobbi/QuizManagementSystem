(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{9253:function(e,t,s){Promise.resolve().then(s.bind(s,6997))},6997:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(7437),r=s(2265),d=s(7120),l=s(7648),i=s(1245),c=s(6410),n=s(5978),x=s(2496),o=s(9064);function p(){let{user:e}=(0,i.a)(),[t,s]=(0,r.useState)([]),[p,m]=(0,r.useState)(!0),[h,u]=(0,r.useState)("all");(0,r.useEffect)(()=>{(async()=>{if(e)try{let t=(0,n.IO)((0,n.hJ)(c.db,"attempts"),(0,n.ar)("quizCreatedBy","==",e.uid),(0,n.Xo)("completedAt","desc")),a=(await (0,n.PL)(t)).docs.map(e=>{var t;return{id:e.id,...e.data(),completedAt:(null===(t=e.data().completedAt)||void 0===t?void 0:t.toDate())||new Date}});s(a)}catch(e){console.error("Error fetching attempts:",e),o.ZP.error("Failed to load quiz results")}finally{m(!1)}})()},[e]);let g=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),y=t.filter(e=>"all"===h||("passed"===h?e.passed:"failed"!==h||!e.passed));return(0,a.jsx)(d.Z,{requireAdmin:!0,children:(0,a.jsxs)("div",{className:"px-4 py-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Quiz Results"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>u("all"),className:"px-3 py-1 rounded-md text-sm ".concat("all"===h?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"All"}),(0,a.jsx)("button",{onClick:()=>u("passed"),className:"px-3 py-1 rounded-md text-sm ".concat("passed"===h?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Passed"}),(0,a.jsx)("button",{onClick:()=>u("failed"),className:"px-3 py-1 rounded-md text-sm ".concat("failed"===h?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Failed"})]})]}),p?(0,a.jsx)("div",{className:"py-10",children:(0,a.jsx)(x.Z,{})}):(0,a.jsx)("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:y.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quiz"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.studentName||"Unknown Student"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.studentId})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.quizTitle})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"text-sm text-gray-900",children:[e.score,"%"]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.passed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.passed?"Passed":"Failed"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(e.completedAt)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsx)(l.default,{href:"/admin/results/".concat(e.id),className:"text-primary-600 hover:text-primary-900",children:"View Details"})})]},e.id))})]})}):(0,a.jsxs)("div",{className:"text-center py-10 px-6",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"all"===h?"No quiz attempts found.":"passed"===h?"No passed quiz attempts found.":"No failed quiz attempts found."}),"all"!==h&&(0,a.jsx)("button",{onClick:()=>u("all"),className:"btn-secondary",children:"Show All Results"})]})})]})})}}},function(e){e.O(0,[853,139,978,448,64,120,971,117,744],function(){return e(e.s=9253)}),_N_E=e.O()}]);