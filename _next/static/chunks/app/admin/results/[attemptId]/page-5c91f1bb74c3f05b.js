(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15],{3103:function(e,s,t){Promise.resolve().then(t.bind(t,1174))},1174:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var r=t(7437),a=t(2265),d=t(9376),n=t(7120),i=t(1245),l=t(6410),c=t(5978),o=t(2496),m=t(9064),x=t(7648);function u(){let{attemptId:e}=(0,d.useParams)(),{user:s}=(0,i.a)(),t=(0,d.useRouter)(),[u,h]=(0,a.useState)(null),[p,g]=(0,a.useState)(null),[j,f]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{if(s&&e)try{var r;let a=await (0,c.QT)((0,c.JU)(l.db,"attempts",e));if(!a.exists()){m.ZP.error("Attempt not found"),t.push("/admin/results");return}let d={id:a.id,...a.data(),completedAt:(null===(r=a.data().completedAt)||void 0===r?void 0:r.toDate())||new Date};if(d.quizCreatedBy!==s.uid){m.ZP.error("You do not have permission to view this result"),t.push("/admin/results");return}h(d);let n=await (0,c.QT)((0,c.JU)(l.db,"quizzes",d.quizId));if(!n.exists()){m.ZP.error("Quiz not found");return}let i={id:n.id,...n.data()};g(i)}catch(e){console.error("Error fetching data:",e),m.ZP.error("Failed to load quiz results")}finally{f(!1)}})()},[s,e,t]),j)?(0,r.jsx)(n.Z,{requireAdmin:!0,children:(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(o.Z,{})})}):u&&p?(0,r.jsx)(n.Z,{requireAdmin:!0,children:(0,r.jsx)("div",{className:"px-4 py-6",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(x.default,{href:"/admin/results",className:"text-primary-600 hover:text-primary-800 mr-2",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Quiz Result Details"})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Quiz Information"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,r.jsxs)("p",{className:"text-gray-700",children:[(0,r.jsx)("span",{className:"font-medium",children:"Title:"})," ",p.title]}),(0,r.jsxs)("p",{className:"text-gray-700 mt-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Description:"})," ",p.description]}),(0,r.jsxs)("p",{className:"text-gray-700 mt-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Passing Score:"})," ",p.passingPercentage,"%"]}),(0,r.jsxs)("p",{className:"text-gray-700 mt-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Questions:"})," ",p.questions.length]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Student Result"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,r.jsxs)("p",{className:"text-gray-700",children:[(0,r.jsx)("span",{className:"font-medium",children:"Student:"})," ",u.studentName||"Unknown"]}),(0,r.jsxs)("p",{className:"text-gray-700 mt-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Completed:"})," ",u.completedAt.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),(0,r.jsxs)("p",{className:"text-gray-700 mt-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Score:"})," ",(0,r.jsxs)("span",{className:"text-lg font-bold text-primary-600",children:[u.score,"%"]})]}),(0,r.jsxs)("p",{className:"text-gray-700 mt-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Result:"}),(0,r.jsx)("span",{className:"ml-2 px-2 py-1 text-xs rounded-full ".concat(u.passed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:u.passed?"PASSED":"FAILED"})]})]})]})]})}),(0,r.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-4",children:"Question Analysis"}),(0,r.jsx)("div",{className:"space-y-6",children:p.questions.map((e,s)=>{let t=u.answers[e.id];e.options.find(e=>e.id===t);let a=e.options.find(e=>e.isCorrect),d=t===(null==a?void 0:a.id);return(0,r.jsxs)("div",{className:"border rounded-lg p-4 ".concat(d?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("h4",{className:"font-medium text-gray-900",children:["Question ",s+1]}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(d?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:d?"Correct":"Incorrect"})]}),(0,r.jsx)("p",{className:"text-gray-800 mb-4",children:e.text}),(0,r.jsx)("div",{className:"space-y-2",children:e.options.map(e=>(0,r.jsx)("div",{className:"p-2 rounded ".concat(e.id===t&&e.isCorrect?"bg-green-200 border border-green-300":e.id!==t||e.isCorrect?e.isCorrect?"bg-green-100 border border-green-200":"bg-gray-100 border border-gray-200":"bg-red-200 border border-red-300"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"mr-2",children:e.id===t?(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm0-2a6 6 0 100-12 6 6 0 000 12z",clipRule:"evenodd"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 8a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})]}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm0-2a6 6 0 100-12 6 6 0 000 12z",clipRule:"evenodd"})})}),(0,r.jsx)("span",{className:e.isCorrect?"font-medium":"",children:e.text}),e.isCorrect&&(0,r.jsx)("span",{className:"ml-2 text-green-600 text-sm",children:"(Correct answer)"})]})},e.id))})]},e.id)})})]})})}):(0,r.jsx)(n.Z,{requireAdmin:!0,children:(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("p",{className:"text-center text-red-500",children:"Result not found"})})})}}},function(e){e.O(0,[853,139,978,448,64,120,971,117,744],function(){return e(e.s=3103)}),_N_E=e.O()}]);