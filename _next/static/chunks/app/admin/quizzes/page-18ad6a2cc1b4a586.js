(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{6473:function(e,t,s){Promise.resolve().then(s.bind(s,5527))},5527:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(7437),i=s(2265),r=s(7120),c=s(7648),d=s(1245),n=s(6410),l=s(5978),x=s(2496),o=s(9064);function u(){let{user:e}=(0,d.a)(),[t,s]=(0,i.useState)([]),[u,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{if(e)try{let t=(0,l.IO)((0,l.hJ)(n.db,"quizzes"),(0,l.ar)("createdBy","==",e.uid),(0,l.Xo)("createdAt","desc")),a=(await (0,l.PL)(t)).docs.map(e=>{var t,s;return{id:e.id,...e.data(),createdAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date,updatedAt:(null===(s=e.data().updatedAt)||void 0===s?void 0:s.toDate())||new Date}});s(a)}catch(e){console.error("Error fetching quizzes:",e),o.ZP.error("Failed to load quizzes")}finally{h(!1)}})()},[e]);let p=async e=>{if(confirm("Are you sure you want to delete this quiz? This action cannot be undone."))try{await (0,l.oe)((0,l.JU)(n.db,"quizzes",e)),s(t.filter(t=>t.id!==e)),o.ZP.success("Quiz deleted successfully")}catch(e){console.error("Error deleting quiz:",e),o.ZP.error("Failed to delete quiz")}},m=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,a.jsx)(r.Z,{requireAdmin:!0,children:(0,a.jsxs)("div",{className:"px-4 py-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Quizzes"}),(0,a.jsx)(c.default,{href:"/admin/quizzes/create",className:"btn-primary",children:"Create New Quiz"})]}),u?(0,a.jsx)("div",{className:"py-10",children:(0,a.jsx)(x.Z,{})}):(0,a.jsx)("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:t.length>0?(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Questions"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passing %"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.questionCount}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.passingPercentage,"%"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.isPublished?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.isPublished?"Published":"Draft"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m(e.createdAt)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(c.default,{href:"/admin/quizzes/".concat(e.id,"/"),className:"text-primary-600 hover:text-primary-900",children:"View"}),(0,a.jsx)(c.default,{href:"/admin/quizzes/edit/".concat(e.id,"/"),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>p(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},e.id))})]}):(0,a.jsxs)("div",{className:"text-center py-10 px-6",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"You haven't created any quizzes yet."}),(0,a.jsx)(c.default,{href:"/admin/quizzes/create",className:"btn-primary",children:"Create Your First Quiz"})]})})]})})}}},function(e){e.O(0,[853,139,978,448,64,120,971,117,744],function(){return e(e.s=6473)}),_N_E=e.O()}]);