(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{978:function(e,s,t){Promise.resolve().then(t.bind(t,662))},662:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var r=t(7437),d=t(2265),i=t(9376),n=t(7120),l=t(1245),a=t(6410),c=t(5978),o=t(2496),m=t(9064),x=t(7648);function u(){let{attemptId:e}=(0,i.useParams)(),{user:s}=(0,l.a)(),t=(0,i.useRouter)(),[u,h]=(0,d.useState)(null),[g,p]=(0,d.useState)(null),[f,j]=(0,d.useState)(!0);return((0,d.useEffect)(()=>{(async()=>{if(s&&e)try{var r;let d=await (0,c.QT)((0,c.JU)(a.db,"attempts",e));if(!d.exists()){m.ZP.error("Attempt not found"),t.push("/student/results");return}let i={id:d.id,...d.data(),completedAt:(null===(r=d.data().completedAt)||void 0===r?void 0:r.toDate())||new Date};if(i.studentId!==s.uid){m.ZP.error("You do not have permission to view this result"),t.push("/student/results");return}h(i);let n=await (0,c.QT)((0,c.JU)(a.db,"quizzes",i.quizId));if(!n.exists()){m.ZP.error("Quiz not found");return}let l={id:n.id,...n.data()};p(l)}catch(e){console.error("Error fetching data:",e),m.ZP.error("Failed to load quiz results")}finally{j(!1)}})()},[s,e,t]),f)?(0,r.jsx)(n.Z,{children:(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(o.Z,{})})}):u&&g?(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"px-4 py-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Quiz Result: ",g.title]}),(0,r.jsxs)("p",{className:"text-gray-600 mt-2",children:["Completed on ",u.completedAt.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 p-4 rounded-lg bg-gray-50",children:[(0,r.jsxs)("div",{className:"mb-4 md:mb-0",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-gray-900",children:"Your Score"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-primary-600",children:[u.score,"%"]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-lg font-medium ".concat(u.passed?"text-green-600":"text-red-600"),children:u.passed?"PASSED":"FAILED"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Passing score: ",g.passingPercentage,"%"]})]}),(0,r.jsx)("div",{className:"mt-4 md:mt-0",children:(0,r.jsx)(x.default,{href:"/student/quizzes",className:"btn-primary",children:"Take Another Quiz"})})]}),(0,r.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-4",children:"Question Review"}),(0,r.jsx)("div",{className:"space-y-6",children:g.questions.map((e,s)=>{let t=u.answers[e.id];e.options.find(e=>e.id===t);let d=e.options.find(e=>e.isCorrect),i=t===(null==d?void 0:d.id);return(0,r.jsxs)("div",{className:"border rounded-lg p-4 ".concat(i?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("h4",{className:"font-medium text-gray-900",children:["Question ",s+1]}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(i?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:i?"Correct":"Incorrect"})]}),(0,r.jsx)("p",{className:"text-gray-800 mb-4",children:e.text}),(0,r.jsx)("div",{className:"space-y-2",children:e.options.map(e=>(0,r.jsx)("div",{className:"p-2 rounded ".concat(e.id===t&&e.isCorrect?"bg-green-200 border border-green-300":e.id!==t||e.isCorrect?e.isCorrect?"bg-green-100 border border-green-200":"bg-gray-100 border border-gray-200":"bg-red-200 border border-red-300"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"mr-2",children:e.id===t?(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm0-2a6 6 0 100-12 6 6 0 000 12z",clipRule:"evenodd"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 8a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})]}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm0-2a6 6 0 100-12 6 6 0 000 12z",clipRule:"evenodd"})})}),(0,r.jsx)("span",{className:e.isCorrect?"font-medium":"",children:e.text}),e.isCorrect&&(0,r.jsx)("span",{className:"ml-2 text-green-600 text-sm",children:"(Correct answer)"})]})},e.id))})]},e.id)})})]})]})}):(0,r.jsx)(n.Z,{children:(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("p",{className:"text-center text-red-500",children:"Result not found"})})})}}},function(e){e.O(0,[853,139,978,448,64,120,971,117,744],function(){return e(e.s=978)}),_N_E=e.O()}]);