(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{6609:function(e,s,t){Promise.resolve().then(t.bind(t,8991))},8991:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var r=t(7437),a=t(2265),i=t(9501),n=t(1245),l=t(9376),d=t(7648),c=t(9064),u=t(2496);function o(){let{register:e,handleSubmit:s,formState:{errors:t}}=(0,i.cI)(),{user:o,login:m,loading:h}=(0,n.a)(),p=(0,l.useRouter)(),[x,f]=(0,a.useState)(!1);(0,a.useEffect)(()=>{o&&!h&&p.push("/dashboard")},[o,h,p]);let y=async e=>{f(!0);try{await m(e.email,e.password),c.ZP.success("Login successful!"),p.push("/dashboard")}catch(e){c.ZP.error(e.message||"Failed to login")}finally{f(!1)}};return h?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)(u.Z,{})}):o?null:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Quiz Management System"}),(0,r.jsx)("h2",{className:"mt-6 text-center text-2xl font-bold text-gray-900",children:"Sign in to your account"})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:s(y),children:[(0,r.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,r.jsx)("input",{id:"email",type:"email",autoComplete:"email",className:"input-field rounded-t-md",placeholder:"Email address",...e("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})}),t.email&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:t.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,r.jsx)("input",{id:"password",type:"password",autoComplete:"current-password",className:"input-field rounded-b-md",placeholder:"Password",...e("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),t.password&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:t.password.message})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:x,className:"btn-primary w-full flex justify-center",children:x?"Signing in...":"Sign in"})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,r.jsx)(d.default,{href:"/signup",className:"text-primary-600 hover:text-primary-500",children:"Sign up"})]})})]})]})})}},2496:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(7437);function a(){return(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary-600"})})}t(2265)},1245:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return u},a:function(){return c}});var r=t(7437),a=t(2265),i=t(3301),n=t(6410),l=t(5978);let d=(0,a.createContext)(void 0);function c(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function u(e){let{children:s}=e,[t,c]=(0,a.useState)(null),[u,o]=(0,a.useState)(!0);async function m(e,s,t,r){try{let a=(await (0,i.Xb)(n.I8,e,s)).user;await (0,i.ck)(a,{displayName:t}),await (0,l.pl)((0,l.JU)(n.db,"users",a.uid),{uid:a.uid,email:a.email,displayName:t,role:r,createdAt:new Date().toISOString()})}catch(e){throw console.error("Error during signup:",e),e}}async function h(e,s){try{await (0,i.e5)(n.I8,e,s)}catch(e){throw console.error("Error during login:",e),e}}async function p(){try{await (0,i.w7)(n.I8)}catch(e){throw console.error("Error during logout:",e),e}}return(0,a.useEffect)(()=>{let e=(0,i.Aj)(n.I8,async e=>{if(e)try{let s=await (0,l.QT)((0,l.JU)(n.db,"users",e.uid));if(s.exists()){let t=s.data();c({uid:e.uid,email:e.email,displayName:e.displayName,role:t.role})}else console.warn("User document not found in Firestore"),c({uid:e.uid,email:e.email,displayName:e.displayName,role:"student"})}catch(e){console.error("Error fetching user data:",e),c(null)}else c(null);o(!1)});return()=>e()},[]),(0,r.jsx)(d.Provider,{value:{user:t,loading:u,signup:m,login:h,logout:p},children:s})}},6410:function(e,s,t){"use strict";let r;t.d(s,{I8:function(){return l},db:function(){return d}});var a=t(738),i=t(3301),n=t(5978);t(9761),r=(0,a.C6)().length?(0,a.C6)()[0]:(0,a.ZF)({apiKey:"AIzaSyApET8-Esu22RoYeldw6USghH9NV3vSQyY",authDomain:"quizmanagement-8207e.firebaseapp.com",projectId:"quizmanagement-8207e",storageBucket:"quizmanagement-8207e.firebasestorage.app",messagingSenderId:"137678753393",appId:"1:137678753393:web:32a414898af4ac719595d0",measurementId:"G-BZCXD15L2K"});let l=(0,i.v0)(r),d=(0,n.ad)(r)}},function(e){e.O(0,[853,139,978,448,64,501,971,117,744],function(){return e(e.s=6609)}),_N_E=e.O()}]);