(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{6609:function(e,t,s){Promise.resolve().then(s.bind(s,8991))},8991:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var r=s(7437),a=s(2265),n=s(9501),i=s(1245),l=s(9376),d=s(7648),c=s(9064),u=s(2496);function o(){let{register:e,handleSubmit:t,formState:{errors:s}}=(0,n.cI)(),{user:o,login:m,loading:E}=(0,i.a)(),h=(0,l.useRouter)(),[_,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{o&&!E&&h.push("/dashboard")},[o,E,h]);let p=async e=>{x(!0);try{await m(e.email,e.password),c.ZP.success("Login successful!"),h.push("/dashboard")}catch(e){c.ZP.error(e.message||"Failed to login")}finally{x(!1)}};return E?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)(u.Z,{})}):o?null:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Quiz Management System"}),(0,r.jsx)("h2",{className:"mt-6 text-center text-2xl font-bold text-gray-900",children:"Sign in to your account"})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:t(p),children:[(0,r.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,r.jsx)("input",{id:"email",type:"email",autoComplete:"email",className:"input-field rounded-t-md",placeholder:"Email address",...e("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})}),s.email&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:s.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,r.jsx)("input",{id:"password",type:"password",autoComplete:"current-password",className:"input-field rounded-b-md",placeholder:"Password",...e("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),s.password&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:s.password.message})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:_,className:"btn-primary w-full flex justify-center",children:_?"Signing in...":"Sign in"})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,r.jsx)(d.default,{href:"/signup",className:"text-primary-600 hover:text-primary-500",children:"Sign up"})]})})]})]})})}},2496:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(7437);function a(){return(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary-600"})})}s(2265)},1245:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return u},a:function(){return c}});var r=s(7437),a=s(2265),n=s(3301),i=s(6410),l=s(5978);let d=(0,a.createContext)(void 0);function c(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function u(e){let{children:t}=e,[s,c]=(0,a.useState)(null),[u,o]=(0,a.useState)(!0);async function m(e,t,s,r){try{let a=(await (0,n.Xb)(i.I8,e,t)).user;await (0,n.ck)(a,{displayName:s}),await (0,l.pl)((0,l.JU)(i.db,"users",a.uid),{uid:a.uid,email:a.email,displayName:s,role:r,createdAt:new Date().toISOString()})}catch(e){throw console.error("Error during signup:",e),e}}async function E(e,t){try{await (0,n.e5)(i.I8,e,t)}catch(e){throw console.error("Error during login:",e),e}}async function h(){try{await (0,n.w7)(i.I8)}catch(e){throw console.error("Error during logout:",e),e}}return(0,a.useEffect)(()=>{let e=(0,n.Aj)(i.I8,async e=>{if(e)try{let t=await (0,l.QT)((0,l.JU)(i.db,"users",e.uid));if(t.exists()){let s=t.data();c({uid:e.uid,email:e.email,displayName:e.displayName,role:s.role})}else console.warn("User document not found in Firestore"),c({uid:e.uid,email:e.email,displayName:e.displayName,role:"student"})}catch(e){console.error("Error fetching user data:",e),c(null)}else c(null);o(!1)});return()=>e()},[]),(0,r.jsx)(d.Provider,{value:{user:s,loading:u,signup:m,login:E,logout:h},children:t})}},6410:function(e,t,s){"use strict";let r;s.d(t,{I8:function(){return c},db:function(){return u}});var a=s(738),n=s(3301),i=s(5978);s(9761);var l=s(257);let d={apiKey:l.env.NEXT_PUBLIC_FIREBASE_API_KEY||"YOUR_API_KEY_PLACEHOLDER",authDomain:l.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"YOUR_AUTH_DOMAIN_PLACEHOLDER",projectId:l.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"YOUR_PROJECT_ID_PLACEHOLDER",storageBucket:l.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"YOUR_STORAGE_BUCKET_PLACEHOLDER",messagingSenderId:l.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"YOUR_MESSAGING_SENDER_ID_PLACEHOLDER",appId:l.env.NEXT_PUBLIC_FIREBASE_APP_ID||"YOUR_APP_ID_PLACEHOLDER",measurementId:l.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"YOUR_MEASUREMENT_ID_PLACEHOLDER"};r=(0,a.C6)().length?(0,a.C6)()[0]:(0,a.ZF)(d);let c=(0,n.v0)(r),u=(0,i.ad)(r)}},function(e){e.O(0,[853,139,978,448,64,501,971,117,744],function(){return e(e.s=6609)}),_N_E=e.O()}]);