(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{6063:function(e,s,a){Promise.resolve().then(a.bind(a,8138))},8138:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return h}});var r=a(7437),t=a(2265),l=a(9501),n=a(1245),i=a(9376),d=a(7648),c=a(9064),o=a(2496);function u(){let e=(0,i.useSearchParams)().get("role"),{register:s,handleSubmit:a,watch:u,setValue:m,formState:{errors:h}}=(0,l.cI)({defaultValues:{role:"admin"===e||"student"===e?e:"student"}}),{user:x,signup:f,loading:p}=(0,n.a)(),N=(0,i.useRouter)(),[E,j]=(0,t.useState)(!1);(0,t.useEffect)(()=>{x&&!p&&N.push("/dashboard")},[x,p,N]),(0,t.useEffect)(()=>{("admin"===e||"student"===e)&&m("role",e)},[e,m]);let g=u("password"),y=async e=>{j(!0);try{await f(e.email,e.password,e.name,e.role),c.ZP.success("Account created successfully!"),N.push("/dashboard")}catch(e){c.ZP.error(e.message||"Failed to create account")}finally{j(!1)}};return p?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)(o.Z,{})}):x?null:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Quiz Management System"}),(0,r.jsx)("h2",{className:"mt-6 text-center text-2xl font-bold text-gray-900",children:"Create your account"})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:a(y),children:[(0,r.jsxs)("div",{className:"rounded-md shadow-sm space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"form-label",children:"Full Name"}),(0,r.jsx)("input",{id:"name",type:"text",className:"input-field",placeholder:"Full Name",...s("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}})}),h.name&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,r.jsx)("input",{id:"email",type:"email",autoComplete:"email",className:"input-field",placeholder:"Email address",...s("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})}),h.email&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,r.jsx)("input",{id:"password",type:"password",className:"input-field",placeholder:"Password",...s("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),h.password&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.password.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password"}),(0,r.jsx)("input",{id:"confirmPassword",type:"password",className:"input-field",placeholder:"Confirm Password",...s("confirmPassword",{required:"Please confirm your password",validate:e=>e===g||"Passwords do not match"})}),h.confirmPassword&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.confirmPassword.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"role",className:"form-label",children:"Account Type"}),(0,r.jsxs)("select",{id:"role",className:"input-field",...s("role",{required:"Role is required"}),children:[(0,r.jsx)("option",{value:"student",children:"Student"}),(0,r.jsx)("option",{value:"admin",children:"Admin"})]}),h.role&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.role.message})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:E,className:"btn-primary w-full flex justify-center",children:E?"Creating account...":"Sign up"})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",(0,r.jsx)(d.default,{href:"/login",className:"text-primary-600 hover:text-primary-500",children:"Sign in"})]})})]})]})})}function m(){return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded shadow-md",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-4"}),(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-8"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded mt-6"})]})]})})})}function h(){return(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)(m,{}),children:(0,r.jsx)(u,{})})}},2496:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var r=a(7437);function t(){return(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary-600"})})}a(2265)},1245:function(e,s,a){"use strict";a.d(s,{AuthProvider:function(){return o},a:function(){return c}});var r=a(7437),t=a(2265),l=a(3301),n=a(6410),i=a(5978);let d=(0,t.createContext)(void 0);function c(){let e=(0,t.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function o(e){let{children:s}=e,[a,c]=(0,t.useState)(null),[o,u]=(0,t.useState)(!0);async function m(e,s,a,r){try{let t=(await (0,l.Xb)(n.I8,e,s)).user;await (0,l.ck)(t,{displayName:a}),await (0,i.pl)((0,i.JU)(n.db,"users",t.uid),{uid:t.uid,email:t.email,displayName:a,role:r,createdAt:new Date().toISOString()})}catch(e){throw console.error("Error during signup:",e),e}}async function h(e,s){try{await (0,l.e5)(n.I8,e,s)}catch(e){throw console.error("Error during login:",e),e}}async function x(){try{await (0,l.w7)(n.I8)}catch(e){throw console.error("Error during logout:",e),e}}return(0,t.useEffect)(()=>{let e=(0,l.Aj)(n.I8,async e=>{if(e)try{let s=await (0,i.QT)((0,i.JU)(n.db,"users",e.uid));if(s.exists()){let a=s.data();c({uid:e.uid,email:e.email,displayName:e.displayName,role:a.role})}else console.warn("User document not found in Firestore"),c({uid:e.uid,email:e.email,displayName:e.displayName,role:"student"})}catch(e){console.error("Error fetching user data:",e),c(null)}else c(null);u(!1)});return()=>e()},[]),(0,r.jsx)(d.Provider,{value:{user:a,loading:o,signup:m,login:h,logout:x},children:s})}},6410:function(e,s,a){"use strict";let r;a.d(s,{I8:function(){return c},db:function(){return o}});var t=a(738),l=a(3301),n=a(5978);a(9761);var i=a(257);let d={apiKey:i.env.NEXT_PUBLIC_FIREBASE_API_KEY||"YOUR_API_KEY_PLACEHOLDER",authDomain:i.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"YOUR_AUTH_DOMAIN_PLACEHOLDER",projectId:i.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"YOUR_PROJECT_ID_PLACEHOLDER",storageBucket:i.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"YOUR_STORAGE_BUCKET_PLACEHOLDER",messagingSenderId:i.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"YOUR_MESSAGING_SENDER_ID_PLACEHOLDER",appId:i.env.NEXT_PUBLIC_FIREBASE_APP_ID||"YOUR_APP_ID_PLACEHOLDER",measurementId:i.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"YOUR_MEASUREMENT_ID_PLACEHOLDER"};r=(0,t.C6)().length?(0,t.C6)()[0]:(0,t.ZF)(d);let c=(0,l.v0)(r),o=(0,n.ad)(r)}},function(e){e.O(0,[853,139,978,448,64,501,971,117,744],function(){return e(e.s=6063)}),_N_E=e.O()}]);